# 负面防护监控功能说明

## 📋 功能概述

负面防护监控模块是 GEO 工具的重要功能之一，用于自动生成负面查询、监控品牌在负面查询中的提及情况、生成澄清模板，并提供风险预警机制，帮助用户及时发现和处理负面风险。

### 核心价值

- **风险防护**：社区讨论显示负面风险上升，及时监控可减少损失 40%
- **自动检测**：自动生成负面查询，无需手动输入
- **智能分析**：负面情感检测和风险等级评估
- **快速响应**：自动生成澄清模板，快速回应负面信息

## 🎯 功能位置

### Tab4（多模型验证）- 负面防护监控模块

在 Tab4 中，负面防护监控模块位于验证表单之前，提供负面查询生成和监控功能。

### Tab6（AI 数据报表）- 负面监控报告模块

在 Tab6 中，负面监控报告模块位于竞品对比分析之后、数据导出之前，提供完整的负面监控报告。

## 📊 功能模块

### 1. 负面查询生成

**功能说明**：
- 自动生成负面查询列表
- 支持 15 种负面查询模板
- 可自定义生成数量（3-10 个）

**负面查询模板包括**：
- {brand} 缺点
- {brand} 问题
- {brand} 不足
- {brand} 缺陷
- {brand} 不好
- {brand} 差评
- {brand} 投诉
- {brand} 负面
- {brand} 不推荐
- {brand} 避坑
- {brand} 坑
- {brand} 不值得
- {brand} 失败
- {brand} 错误
- {brand} 风险

**使用方式**：
1. 在 Tab4 中启用"负面监控"开关
2. 设置负面查询数量（3-10 个）
3. 点击"生成负面查询"
4. 系统自动生成负面查询列表
5. 可选择"添加到验证查询"，将负面查询添加到验证流程

---

### 2. 负面情感检测

**功能说明**：
- 自动检测 AI 响应中的负面情感
- 识别负面关键词和短语
- 计算负面程度得分（0-1）

**检测内容**：
- 负面关键词：缺点、问题、不足、缺陷、不好、差评等
- 负面短语：不好、不行、不适合、不推荐、有问题、存在缺陷等
- 负面程度：基于负面关键词数量和文本长度计算

---

### 3. 风险等级评估

**功能说明**：
- 自动评估每个负面查询的风险等级
- 风险等级：高、中、低
- 提供风险说明和优化建议

**风险等级判断**：
- **高风险**：负面查询中未提及品牌，可能存在负面信息或品牌被忽略
- **中风险**：
  - 负面查询中提及品牌，需要关注并准备澄清内容
  - 未提及品牌，可能影响品牌可见性
- **低风险**：品牌正常提及，无负面信息

---

### 4. 澄清模板生成

**功能说明**：
- 自动生成澄清模板，回应负面信息
- 包含问题概述、实际情况、品牌优势、建议、联系方式等
- 支持下载为 Markdown 文件

**模板结构**：
1. 问题概述
2. 实际情况（关于常见误解）
3. 品牌优势
4. 建议（查看文档、联系客服、参考案例、试用体验）
5. 联系方式

**使用方式**：
1. 在 Tab4 的负面监控分析结果中
2. 展开高风险查询详情
3. 点击"生成澄清模板"
4. 查看和编辑澄清模板
5. 下载为 Markdown 文件

---

### 5. 预警机制

**功能说明**：
- 自动检测异常情况并发出预警
- 预警等级：高、中、低
- 提供具体的预警信息和优化建议

**预警条件**：
- 平均提及次数低于阈值（默认 0.3）
- 发现高风险负面查询
- 发现中风险负面查询

---

### 6. 负面监控报告

**功能说明**：
- 在 Tab6 中生成完整的负面监控报告
- 包含风险统计、预警信息、优化建议
- 支持下载为 JSON 文件

**报告内容**：
- 报告概览：总查询数、高风险数、平均提及次数、平均负面得分
- 预警信息：高风险、中风险预警
- 优化建议：基于分析结果提供优化建议
- 高风险/中风险查询列表

## 🔄 工作流程

### 1. 启用负面监控

1. 在 Tab4 中启用"负面监控"开关
2. 设置负面查询数量
3. 点击"生成负面查询"

### 2. 验证负面查询

1. 将负面查询添加到验证查询中
2. 点击"开始验证"
3. 系统自动验证负面查询的提及情况
4. 自动进行负面情感检测和风险评估

### 3. 查看分析结果

1. 在 Tab4 中查看负面监控分析结果
2. 查看风险等级统计
3. 查看详细分析结果
4. 查看高风险查询详情

### 4. 生成澄清模板

1. 展开高风险查询详情
2. 点击"生成澄清模板"
3. 查看和编辑澄清模板
4. 下载为 Markdown 文件

### 5. 查看完整报告

1. 在 Tab6 中查看负面监控报告
2. 查看报告概览和预警信息
3. 查看优化建议
4. 下载完整报告为 JSON 文件

## 💡 使用建议

### 1. 定期监控

建议每月至少进行一次负面监控，及时发现和处理负面风险。

### 2. 重点关注高风险查询

优先处理高风险负面查询，及时生成澄清内容。

### 3. 优化内容策略

基于负面监控报告，优化内容策略，提升品牌在负面查询中的提及率。

### 4. 建立响应机制

建立负面信息响应机制，快速生成澄清内容并发布。

## 🔧 技术实现

### 模块位置

- **监控模块**：`modules/negative_monitor.py`
- **UI 集成**：`modules/geo_tool.py` Tab4、Tab6

### 核心类

- `NegativeMonitor`：负面防护监控器
  - `generate_negative_queries()`：生成负面查询
  - `detect_negative_sentiment()`：检测负面情感
  - `analyze_negative_mentions()`：分析负面提及
  - `generate_clarification_template()`：生成澄清模板
  - `generate_negative_report()`：生成负面监控报告

### 检测算法

- **负面关键词匹配**：使用关键词列表匹配负面词汇
- **负面短语模式匹配**：使用正则表达式匹配负面短语
- **负面程度计算**：基于负面关键词数量和文本长度计算

## 📝 更新日志

- **2025-01-26**：初始版本发布
  - 实现负面查询生成功能
  - 实现负面情感检测和风险等级评估
  - 实现澄清模板生成功能
  - 实现预警机制
  - 实现负面监控报告
  - 集成到 Tab4（多模型验证）和 Tab6（AI 数据报表）

---

**版本**：1.0.0  
**最后更新**：2025-01-26
